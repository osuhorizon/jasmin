<h2 class="section-title">Users</h2>
<p class="section-lead">This is the users panel. It lists all registered users and provides links to actions that can be quickly done to the users.</p>
<div class="card">
    <div class="card-header">
        Search for users.
    </div>
    <div class="card-body">
        <form action="/users/1" method="post">
            <div class="form-group">
                <input type="text" class="form-control" name="user" placeholder="Username or Email" value="">
            </div>
            <button class="btn btn-success" type="submit" name="">Search</button>
        </form>
    </div>
    <div class="card-footer">
        Horizon
    </div>
</div>
<ul class="pagination">
    <% if(page <= 1){ %>
        <li class="page-item disabled">
    <% } else { %>
        <li class="page-item">
    <% } %>
        <a class="page-link" href="/users/<%= parseInt(page) - 1%>" aria-label="Previous">
            <span aria-hidden="true">«</span>
            <span class="sr-only">Previous</span>
        </a>
    </li>
    <% for(var i = 1; i <= pages; i++){ %>
        <% if(i == page){ %>
            <li class="page-item active">
        <% } else { %>
            <li class="page-item">
        <% } %>
            <a class="page-link" href="/users/<%= i %>"><%= i %></a>
        </li>
    <% } %>
    <% if(page >= pages){ %>
        <li class="page-item disabled">
    <% } else { %>
        <li class="page-item">
    <% } %>
        <a class="page-link" href="/users/<%= parseInt(page) + 1%>" aria-label="Next">
            <span aria-hidden="true">»</span>
            <span class="sr-only">Next</span>
        </a>
    </li>
</ul>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Name</th>
            <th scope="col">Privilege</th>
            <th scope="col">Allowed</th>
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        <% for(var i = 0; i < users.length; i++){ %>
            <% const user = users[i] %>
            <tr>
                <th scope="row"><%= user.id %></th>
                <td>
                    <% if(user.country != "XX"){ %>
                        <img class="nflag" src="https://ussr.pl/static/images/new-flags/flag-<%= user.country.toLowerCase() %>.svg">
                    <% } else { %>
                        ?
                    <% } %>
                    <%= user.username %>
                </td>
                <td><span class="badge badge-<%= privileges.find(privilege => privilege.privileges == user.privileges ).color %>"> <%= privileges.find(privilege => privilege.privileges == user.privileges ).name %> </span></td>
                <td>
                    <% if(user.allowed){ %>
                        <span class="badge badge-success">Yes</span>
                    <% } else { %>
                        <span class="badge badge-danger">No</span>
                    <% } %>
                </td>
                <td>
                    <a href="/users/<%= user.id %>/edit" class="btn btn-primary">Edit</a>
                </td>
            </tr>
        <% } %>
    </tbody>
</table>

<ul class="pagination">
    <% if(page <= 1){ %>
        <li class="page-item disabled">
    <% } else { %>
        <li class="page-item">
    <% } %>
        <a class="page-link" href="/users/<%= parseInt(page) - 1%>" aria-label="Previous">
            <span aria-hidden="true">«</span>
            <span class="sr-only">Previous</span>
        </a>
    </li>
    <% for(var i = 1; i <= pages; i++){ %>
        <% if(i == page){ %>
            <li class="page-item active">
        <% } else { %>
            <li class="page-item">
        <% } %>
            <a class="page-link" href="/users/<%= i %>"><%= i %></a>
        </li>
    <% } %>
    <% if(page >= pages){ %>
        <li class="page-item disabled">
    <% } else { %>
        <li class="page-item">
    <% } %>
        <a class="page-link" href="/users/<%= parseInt(page) + 1%>" aria-label="Next">
            <span aria-hidden="true">»</span>
            <span class="sr-only">Next</span>
        </a>
    </li>
</ul>